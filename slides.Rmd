---
title: "The day the carnival came to town"
author: "David Hood, @thoughtfulnz"
date: "12/11/2018"
output: powerpoint_presentation
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

```{r libraries, message=FALSE, warning=FALSE}
library(readr)
library(dplyr)
library(lubridate)
library(ggplot2)
library(purrr)
library(tidyr)
library(ggraph)
library(igraph)
library(ggthemes)
library(gganimate)
```

```{r coredata}
# coredata has v_for visitor (tweet discussion) and
# m_for_mentions (notifications from the tweets)
load("~/Syncplicity Folders/support_files/coredata.RData")
n_for_nznetwork <- read.csv("~/Syncplicity Folders/support_files/nzmatches.csv",
                          colClasses = "character") # nz friend relationships
r_for_radicalism <- read.csv("~/Syncplicity Folders/support_files/fa_spec.csv",
                          colClasses = "character") # were on spectrum account
c_for_country <- read.csv("~/Syncplicity Folders/support_files/assignment.csv",
                          colClasses = "character")
```

## Dataset

- From targetted searches & capturing at time
- 2018-07-25 13:03:40 to 2018-08-06 23:45:21 UTC
- 115218 tweets, 3065709 mentions
- 373693 accounts loosely involved
- 40798 accounts tightly involved

## Backstory

```{r, fig.height=3, dpi=300}
# 5th July
data_as_txt <- "
state, opposed, supportive
NZ, 25.5, 81.3
AU, 25.5, 0
US, 20.7, 12.5
UK, 10.9, 6.3
robots, 7.6, 0
anon, 8.2, 0
other, 1.6, 0"

read.csv(text=data_as_txt) %>% gather(status, percent, 2:3) %>%
    ggplot(aes(x=status, y=percent, fill=state)) + 
    geom_col(width=0.3) + coord_flip() + theme_minimal() +
    scale_fill_colorblind() + xlab("reaction to Phil")

```

## Composition

```{r}
c_for_country %>% 
    mutate(location = case_when(
        locat == "offshore" ~ "not nz",
        locat == "US" ~ "US",
        locat == "" ~ "unknown",
        locat == "GB" ~ "UK",
        locat == "AU" ~ "AU",
        locat == "NZ" ~ "NZ",
        locat == "CA" ~ "CA",
        TRUE ~ "other"
    )) %>%
    count(location, sort = TRUE) %>%
    ggplot(aes(x=location, y=n, fill=location)) + 
    geom_col(width=0.3) + theme_minimal() +
    scale_fill_colorblind() + xlab("inferred location")
```

## 


